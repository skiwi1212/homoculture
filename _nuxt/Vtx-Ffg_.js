import{m as O,u as P,b as W,i as E,d as q,t as C,w as I,e as J,f as _}from"./Bxj6KYvj.js";import{as as f,d as x,L as S,av as m,b as $,am as j,J as z,aJ as B}from"./B0V24EwP.js";function H(e={}){const{inheritAttrs:t=!0}=e,u=f(),p=x({setup(i,{slots:d}){return()=>{u.value=d.default}}}),c=x({inheritAttrs:t,props:e.props,setup(i,{attrs:d,slots:n}){return()=>{var o;u.value;const a=(o=u.value)==null?void 0:o.call(u,{...e.props==null?D(d):i,$slots:n});return t&&(a==null?void 0:a.length)===1?a[0]:a}}});return O({define:p,reuse:c},[p,c])}function D(e){const t={};for(const u in e)t[W(u)]=e[u];return t}const F=E?window:void 0,L=E?window.navigator:void 0;function K(e){var t;const u=m(e);return(t=u==null?void 0:u.$el)!=null?t:u}function M(...e){const t=[],u=()=>{t.forEach(n=>n()),t.length=0},p=(n,o,a,s)=>(n.addEventListener(o,a,s),()=>n.removeEventListener(o,a,s)),c=S(()=>{const n=C(m(e[0])).filter(o=>o!=null);return n.every(o=>typeof o!="string")?n:void 0}),i=I(()=>{var n,o;return[(o=(n=c.value)==null?void 0:n.map(a=>K(a)))!=null?o:[F].filter(a=>a!=null),C(m(c.value?e[1]:e[0])),C(z(c.value?e[2]:e[1])),m(c.value?e[3]:e[2])]},([n,o,a,s])=>{if(u(),!(n!=null&&n.length)||!(o!=null&&o.length)||!(a!=null&&a.length))return;const v=_(s)?{...s}:s;t.push(...n.flatMap(y=>o.flatMap(b=>a.map(g=>p(y,b,g,v)))))},{flush:"post"}),d=()=>{i(),u()};return J(u),d}function N(){const e=f(!1),t=j();return t&&$(()=>{e.value=!0},t),e}function R(e){const t=N();return S(()=>(t.value,!!e()))}function T(e,t={}){const{controls:u=!1,navigator:p=L}=t,c=R(()=>p&&"permissions"in p),i=f(),d=typeof e=="string"?{name:e}:e,n=f(),o=()=>{var s,v;n.value=(v=(s=i.value)==null?void 0:s.state)!=null?v:"prompt"};M(i,"change",o,{passive:!0});const a=q(async()=>{if(c.value){if(!i.value)try{i.value=await p.permissions.query(d)}catch{i.value=void 0}finally{o()}if(u)return B(i.value)}});return a(),u?{state:n,isSupported:c,query:a}:n}function Q(e={}){const{navigator:t=L,read:u=!1,source:p,copiedDuring:c=1500,legacy:i=!1}=e,d=R(()=>t&&"clipboard"in t),n=T("clipboard-read"),o=T("clipboard-write"),a=S(()=>d.value||i),s=f(""),v=f(!1),y=P(()=>v.value=!1,c,{immediate:!1});async function b(){let l=!(d.value&&w(n.value));if(!l)try{s.value=await t.clipboard.readText()}catch{l=!0}l&&(s.value=k())}a.value&&u&&M(["copy","cut"],b,{passive:!0});async function g(l=m(p)){if(a.value&&l!=null){let r=!(d.value&&w(o.value));if(!r)try{await t.clipboard.writeText(l)}catch{r=!0}r&&A(l),s.value=l,v.value=!0,y.start()}}function A(l){const r=document.createElement("textarea");r.value=l??"",r.style.position="absolute",r.style.opacity="0",document.body.appendChild(r),r.select(),document.execCommand("copy"),r.remove()}function k(){var l,r,h;return(h=(r=(l=document==null?void 0:document.getSelection)==null?void 0:l.call(document))==null?void 0:r.toString())!=null?h:""}function w(l){return l==="granted"||l==="prompt"}return{isSupported:a,text:s,copied:v,copy:g}}export{H as c,Q as u};
